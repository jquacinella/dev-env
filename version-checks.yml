---
- name: Check for Available Tool Updates
  hosts: localhost
  connection: local
  become: no
  vars_files:
    - vars/versions.yml
  vars:
    updates_available: []
    up_to_date: []

  tasks:
    - name: Display current configuration
      debug:
        msg: "Checking for updates to installed development tools..."
      tags:
        - always

    # FZF
    - name: Get latest fzf version from GitHub
      uri:
        url: https://api.github.com/repos/junegunn/fzf/releases/latest
        return_content: yes
      register: fzf_latest
      tags:
        - fzf

    - name: Compare fzf versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'fzf', 'current': fzf_version, 'latest': fzf_latest.json.tag_name}] }}"
      when: fzf_version != fzf_latest.json.tag_name
      tags:
        - fzf

    - name: Mark fzf as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['fzf'] }}"
      when: fzf_version == fzf_latest.json.tag_name
      tags:
        - fzf

    # UP (Ultimate Plumber)
    - name: Get latest up version from GitHub
      uri:
        url: https://api.github.com/repos/akavel/up/releases/latest
        return_content: yes
      register: up_latest
      tags:
        - up

    - name: Compare up versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'up', 'current': up_version, 'latest': up_latest.json.tag_name}] }}"
      when: up_version != up_latest.json.tag_name
      tags:
        - up

    - name: Mark up as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['up'] }}"
      when: up_version == up_latest.json.tag_name
      tags:
        - up

    # Ripgrep
    - name: Get latest ripgrep version from GitHub
      uri:
        url: https://api.github.com/repos/BurntSushi/ripgrep/releases/latest
        return_content: yes
      register: ripgrep_latest
      tags:
        - ripgrep
        - rg

    - name: Compare ripgrep versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'ripgrep', 'current': ripgrep_version, 'latest': ripgrep_latest.json.tag_name}] }}"
      when: ripgrep_version != ripgrep_latest.json.tag_name
      tags:
        - ripgrep
        - rg

    - name: Mark ripgrep as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['ripgrep'] }}"
      when: ripgrep_version == ripgrep_latest.json.tag_name
      tags:
        - ripgrep
        - rg

    # fd
    - name: Get latest fd version from GitHub
      uri:
        url: https://api.github.com/repos/sharkdp/fd/releases/latest
        return_content: yes
      register: fd_latest
      tags:
        - fd

    - name: Compare fd versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'fd', 'current': fd_version, 'latest': fd_latest.json.tag_name}] }}"
      when: fd_version != fd_latest.json.tag_name
      tags:
        - fd

    - name: Mark fd as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['fd'] }}"
      when: fd_version == fd_latest.json.tag_name
      tags:
        - fd

    # Espanso
    - name: Get latest espanso version from GitHub
      uri:
        url: https://api.github.com/repos/espanso/espanso/releases/latest
        return_content: yes
      register: espanso_latest
      tags:
        - espanso

    - name: Compare espanso versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'espanso', 'current': espanso_version, 'latest': espanso_latest.json.tag_name}] }}"
      when: espanso_version != espanso_latest.json.tag_name
      tags:
        - espanso

    - name: Mark espanso as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['espanso'] }}"
      when: espanso_version == espanso_latest.json.tag_name
      tags:
        - espanso

    # Dust
    - name: Get latest dust version from GitHub
      uri:
        url: https://api.github.com/repos/bootandy/dust/releases/latest
        return_content: yes
      register: dust_latest
      tags:
        - dust

    - name: Compare dust versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'dust', 'current': dust_version, 'latest': dust_latest.json.tag_name}] }}"
      when: dust_version != dust_latest.json.tag_name
      tags:
        - dust

    - name: Mark dust as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['dust'] }}"
      when: dust_version == dust_latest.json.tag_name
      tags:
        - dust

    # xh
    - name: Get latest xh version from GitHub
      uri:
        url: https://api.github.com/repos/ducaale/xh/releases/latest
        return_content: yes
      register: xh_latest
      tags:
        - xh

    - name: Compare xh versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'xh', 'current': xh_version, 'latest': xh_latest.json.tag_name}] }}"
      when: xh_version != xh_latest.json.tag_name
      tags:
        - xh

    - name: Mark xh as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['xh'] }}"
      when: xh_version == xh_latest.json.tag_name
      tags:
        - xh

    # Broot
    - name: Get latest broot version from GitHub
      uri:
        url: https://api.github.com/repos/Canop/broot/releases/latest
        return_content: yes
      register: broot_latest
      tags:
        - broot

    - name: Compare broot versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'broot', 'current': broot_version, 'latest': broot_latest.json.tag_name}] }}"
      when: broot_version != broot_latest.json.tag_name
      tags:
        - broot

    - name: Mark broot as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['broot'] }}"
      when: broot_version == broot_latest.json.tag_name
      tags:
        - broot

    # Procs
    - name: Get latest procs version from GitHub
      uri:
        url: https://api.github.com/repos/dalance/procs/releases/latest
        return_content: yes
      register: procs_latest
      tags:
        - procs

    - name: Compare procs versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'procs', 'current': procs_version, 'latest': procs_latest.json.tag_name}] }}"
      when: procs_version != procs_latest.json.tag_name
      tags:
        - procs

    - name: Mark procs as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['procs'] }}"
      when: procs_version == procs_latest.json.tag_name
      tags:
        - procs

    # Bottom
    - name: Get latest bottom version from GitHub
      uri:
        url: https://api.github.com/repos/ClementTsang/bottom/releases/latest
        return_content: yes
      register: bottom_latest
      tags:
        - bottom
        - btm

    - name: Compare bottom versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'bottom', 'current': bottom_version, 'latest': bottom_latest.json.tag_name}] }}"
      when: bottom_version != bottom_latest.json.tag_name
      tags:
        - bottom
        - btm

    - name: Mark bottom as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['bottom'] }}"
      when: bottom_version == bottom_latest.json.tag_name
      tags:
        - bottom
        - btm

    # Zellij
    - name: Get latest zellij version from GitHub
      uri:
        url: https://api.github.com/repos/zellij-org/zellij/releases/latest
        return_content: yes
      register: zellij_latest
      tags:
        - zellij

    - name: Compare zellij versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'zellij', 'current': zellij_version, 'latest': zellij_latest.json.tag_name}] }}"
      when: zellij_version != zellij_latest.json.tag_name
      tags:
        - zellij

    - name: Mark zellij as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['zellij'] }}"
      when: zellij_version == zellij_latest.json.tag_name
      tags:
        - zellij

    # Gping
    - name: Get latest gping version from GitHub
      uri:
        url: https://api.github.com/repos/orf/gping/releases/latest
        return_content: yes
      register: gping_latest
      tags:
        - gping

    - name: Compare gping versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'gping', 'current': gping_version, 'latest': gping_latest.json.tag_name}] }}"
      when: gping_version != gping_latest.json.tag_name
      tags:
        - gping

    - name: Mark gping as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['gping'] }}"
      when: gping_version == gping_latest.json.tag_name
      tags:
        - gping

    # Bandwhich
    - name: Get latest bandwhich version from GitHub
      uri:
        url: https://api.github.com/repos/imsnif/bandwhich/releases/latest
        return_content: yes
      register: bandwhich_latest
      tags:
        - bandwhich

    - name: Compare bandwhich versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'bandwhich', 'current': bandwhich_version, 'latest': bandwhich_latest.json.tag_name}] }}"
      when: bandwhich_version != bandwhich_latest.json.tag_name
      tags:
        - bandwhich

    - name: Mark bandwhich as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['bandwhich'] }}"
      when: bandwhich_version == bandwhich_latest.json.tag_name
      tags:
        - bandwhich

    # Bat
    - name: Get latest bat version from GitHub
      uri:
        url: https://api.github.com/repos/sharkdp/bat/releases/latest
        return_content: yes
      register: bat_latest
      tags:
        - bat

    - name: Compare bat versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'bat', 'current': bat_version, 'latest': bat_latest.json.tag_name}] }}"
      when: bat_version != bat_latest.json.tag_name
      tags:
        - bat

    - name: Mark bat as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['bat'] }}"
      when: bat_version == bat_latest.json.tag_name
      tags:
        - bat

    # Eza
    - name: Get latest eza version from GitHub
      uri:
        url: https://api.github.com/repos/eza-community/eza/releases/latest
        return_content: yes
      register: eza_latest

    - name: Compare eza versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'eza', 'current': eza_version, 'latest': eza_latest.json.tag_name}] }}"
      when: eza_version != eza_latest.json.tag_name

    - name: Mark eza as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['eza'] }}"
      when: eza_version == eza_latest.json.tag_name

    # LSD
    - name: Get latest lsd version from GitHub
      uri:
        url: https://api.github.com/repos/lsd-rs/lsd/releases/latest
        return_content: yes
      register: lsd_latest
      tags:
        - lsd

    - name: Compare lsd versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'lsd', 'current': lsd_version, 'latest': lsd_latest.json.tag_name}] }}"
      when: lsd_version != lsd_latest.json.tag_name
      tags:
        - lsd

    - name: Mark lsd as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['lsd'] }}"
      when: lsd_version == lsd_latest.json.tag_name
      tags:
        - lsd

    # Zoxide
    - name: Get latest zoxide version from GitHub
      uri:
        url: https://api.github.com/repos/ajeetdsouza/zoxide/releases/latest
        return_content: yes
      register: zoxide_latest
      tags:
        - zoxide

    - name: Compare zoxide versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'zoxide', 'current': zoxide_version, 'latest': zoxide_latest.json.tag_name}] }}"
      when: zoxide_version != zoxide_latest.json.tag_name
      tags:
        - zoxide

    - name: Mark zoxide as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['zoxide'] }}"
      when: zoxide_version == zoxide_latest.json.tag_name
      tags:
        - zoxide

    # GitUI
    - name: Get latest gitui version from GitHub
      uri:
        url: https://api.github.com/repos/gitui-org/gitui/releases/latest
        return_content: yes
      register: gitui_latest
      tags:
        - gitui

    - name: Compare gitui versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'gitui', 'current': gitui_version, 'latest': gitui_latest.json.tag_name}] }}"
      when: gitui_version != gitui_latest.json.tag_name
      tags:
        - gitui

    - name: Mark gitui as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['gitui'] }}"
      when: gitui_version == gitui_latest.json.tag_name
      tags:
        - gitui

    # Lazygit
    - name: Get latest lazygit version from GitHub
      uri:
        url: https://api.github.com/repos/jesseduffield/lazygit/releases/latest
        return_content: yes
      register: lazygit_latest
      tags:
        - lazygit

    - name: Compare lazygit versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'lazygit', 'current': lazygit_version, 'latest': lazygit_latest.json.tag_name}] }}"
      when: lazygit_version != lazygit_latest.json.tag_name
      tags:
        - lazygit

    - name: Mark lazygit as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['lazygit'] }}"
      when: lazygit_version == lazygit_latest.json.tag_name
      tags:
        - lazygit

    # Lazysql
    - name: Get latest lazysql version from GitHub
      uri:
        url: https://api.github.com/repos/jorgerojas26/lazysql/releases/latest
        return_content: yes
      register: lazysql_latest
      tags:
        - lazysql

    - name: Compare lazysql versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'lazysql', 'current': lazysql_version, 'latest': lazysql_latest.json.tag_name}] }}"
      when: lazysql_version != lazysql_latest.json.tag_name
      tags:
        - lazysql

    - name: Mark lazysql as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['lazysql'] }}"
      when: lazysql_version == lazysql_latest.json.tag_name
      tags:
        - lazysql

    # Slumber
    - name: Get latest slumber version from GitHub
      uri:
        url: https://api.github.com/repos/LucasPickering/slumber/releases/latest
        return_content: yes
      register: slumber_latest
      tags:
        - slumber

    - name: Compare slumber versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'slumber', 'current': slumber_version, 'latest': slumber_latest.json.tag_name}] }}"
      when: slumber_version != slumber_latest.json.tag_name
      tags:
        - slumber

    - name: Mark slumber as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['slumber'] }}"
      when: slumber_version == slumber_latest.json.tag_name
      tags:
        - slumber

    # Asciinema
    - name: Get latest asciinema version from GitHub
      uri:
        url: https://api.github.com/repos/asciinema/asciinema/releases/latest
        return_content: yes
      register: asciinema_latest
      tags:
        - asciinema

    - name: Compare asciinema versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'asciinema', 'current': asciinema_version, 'latest': asciinema_latest.json.tag_name}] }}"
      when: asciinema_version != asciinema_latest.json.tag_name
      tags:
        - asciinema

    - name: Mark asciinema as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['asciinema'] }}"
      when: asciinema_version == asciinema_latest.json.tag_name
      tags:
        - asciinema

    # Navi
    - name: Get latest navi version from GitHub
      uri:
        url: https://api.github.com/repos/denisidoro/navi/releases/latest
        return_content: yes
      register: navi_latest
      tags:
        - navi

    - name: Compare navi versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'navi', 'current': navi_version, 'latest': navi_latest.json.tag_name}] }}"
      when: navi_version != navi_latest.json.tag_name
      tags:
        - navi

    - name: Mark navi as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['navi'] }}"
      when: navi_version == navi_latest.json.tag_name
      tags:
        - navi

    # SSH-List
    - name: Get latest ssh-list version from GitHub
      uri:
        url: https://api.github.com/repos/akinoiro/ssh-list/releases/latest
        return_content: yes
      register: ssh_list_latest
      tags:
        - ssh-list

    - name: Compare ssh-list versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'ssh-list', 'current': ssh_list_version, 'latest': ssh_list_latest.json.tag_name}] }}"
      when: ssh_list_version != ssh_list_latest.json.tag_name
      tags:
        - ssh-list

    - name: Mark ssh-list as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['ssh-list'] }}"
      when: ssh_list_version == ssh_list_latest.json.tag_name
      tags:
        - ssh-list

    # TLDR (Tealdeer)
    - name: Get latest tldr version from GitHub
      uri:
        url: https://api.github.com/repos/tealdeer-rs/tealdeer/releases/latest
        return_content: yes
      register: tldr_latest
      tags:
        - tldr

    - name: Compare tldr versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'tldr', 'current': tldr_version, 'latest': tldr_latest.json.tag_name}] }}"
      when: tldr_version != tldr_latest.json.tag_name
      tags:
        - tldr

    - name: Mark tldr as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['tldr'] }}"
      when: tldr_version == tldr_latest.json.tag_name
      tags:
        - tldr

    # NVM
    - name: Get latest nvm version from GitHub
      uri:
        url: https://api.github.com/repos/nvm-sh/nvm/releases/latest
        return_content: yes
      register: nvm_latest
      tags:
        - nvm

    - name: Compare nvm versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'nvm', 'current': nvm_version, 'latest': nvm_latest.json.tag_name}] }}"
      when: nvm_version != nvm_latest.json.tag_name
      tags:
        - nvm

    - name: Mark nvm as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['nvm'] }}"
      when: nvm_version == nvm_latest.json.tag_name
      tags:
        - nvm
    # Podman (from Ubuntu repositories)
    - name: Get installed podman version
      shell: podman --version 2>/dev/null | grep -oP '\d+\.\d+\.\d+' || echo "not installed"
      register: podman_installed
      changed_when: false
      failed_when: false
      tags:
        - podman

    - name: Get latest podman version from GitHub
      uri:
        url: https://api.github.com/repos/containers/podman/releases/latest
        return_content: yes
      register: podman_latest
      tags:
        - podman

    - name: Compare podman versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'podman', 'current': podman_installed.stdout, 'latest': podman_latest.json.tag_name}] }}"
      when: 
        - podman_installed.stdout != "not installed"
        - podman_installed.stdout not in podman_latest.json.tag_name
      tags:
        - podman

    - name: Mark podman as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['podman'] }}"
      when: 
        - podman_installed.stdout != "not installed"
        - podman_installed.stdout in podman_latest.json.tag_name
      tags:
        - podman

    - name: Mark podman as not installed
      debug:
        msg: "Podman is not currently installed"
      when: podman_installed.stdout == "not installed"
      tags:
        - podman


    # Spaceship Prompt
    - name: Get latest spaceship-prompt version from GitHub
      uri:
        url: https://api.github.com/repos/spaceship-prompt/spaceship-prompt/releases/latest
        return_content: yes
      register: spaceship_prompt_latest
      tags:
        - spaceship-prompt
        - zsh
        - zsh-theme

    - name: Compare spaceship-prompt versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'spaceship-prompt', 'current': spaceship_prompt_version, 'latest': spaceship_prompt_latest.json.tag_name}] }}"
      when: spaceship_prompt_version != spaceship_prompt_latest.json.tag_name
      tags:
        - spaceship-prompt
        - zsh
        - zsh-theme

    - name: Mark spaceship-prompt as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['spaceship-prompt'] }}"
      when: spaceship_prompt_version == spaceship_prompt_latest.json.tag_name
      tags:
        - spaceship-prompt
        - zsh
        - zsh-theme

    # ZSH Autosuggestions
    - name: Get latest zsh-autosuggestions version from GitHub
      uri:
        url: https://api.github.com/repos/zsh-users/zsh-autosuggestions/tags
        return_content: yes
      register: zsh_autosuggestions_latest
      tags:
        - zsh
        - zsh-plugins
        - zsh-autosuggestions

    - name: Compare zsh-autosuggestions versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'zsh-autosuggestions', 'current': zsh_autosuggestions_version, 'latest': zsh_autosuggestions_latest.json[0].name}] }}"
      when: zsh_autosuggestions_version != zsh_autosuggestions_latest.json[0].name
      tags:
        - zsh
        - zsh-plugins
        - zsh-autosuggestions

    - name: Mark zsh-autosuggestions as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['zsh-autosuggestions'] }}"
      when: zsh_autosuggestions_version == zsh_autosuggestions_latest.json[0].name
      tags:
        - zsh
        - zsh-plugins
        - zsh-autosuggestions

    # ZSH Syntax Highlighting
    - name: Get latest zsh-syntax-highlighting version from GitHub
      uri:
        url: https://api.github.com/repos/zsh-users/zsh-syntax-highlighting/tags
        return_content: yes
      register: zsh_syntax_highlighting_latest
      tags:
        - zsh
        - zsh-plugins
        - zsh-syntax-highlighting

    - name: Compare zsh-syntax-highlighting versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'zsh-syntax-highlighting', 'current': zsh_syntax_highlighting_version, 'latest': zsh_syntax_highlighting_latest.json[0].name}] }}"
      when: zsh_syntax_highlighting_version != zsh_syntax_highlighting_latest.json[0].name
      tags:
        - zsh
        - zsh-plugins
        - zsh-syntax-highlighting

    - name: Mark zsh-syntax-highlighting as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['zsh-syntax-highlighting'] }}"
      when: zsh_syntax_highlighting_version == zsh_syntax_highlighting_latest.json[0].name
      tags:
        - zsh
        - zsh-plugins
        - zsh-syntax-highlighting

    # ZSH History Substring Search
    - name: Get latest zsh-history-substring-search version from GitHub
      uri:
        url: https://api.github.com/repos/zsh-users/zsh-history-substring-search/tags
        return_content: yes
      register: zsh_history_substring_search_latest
      tags:
        - zsh
        - zsh-plugins
        - zsh-history-substring-search

    - name: Compare zsh-history-substring-search versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'zsh-history-substring-search', 'current': zsh_history_substring_search_version, 'latest': zsh_history_substring_search_latest.json[0].name}] }}"
      when: zsh_history_substring_search_version != zsh_history_substring_search_latest.json[0].name
      tags:
        - zsh
        - zsh-plugins
        - zsh-history-substring-search

    - name: Mark zsh-history-substring-search as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['zsh-history-substring-search'] }}"
      when: zsh_history_substring_search_version == zsh_history_substring_search_latest.json[0].name
      tags:
        - zsh
        - zsh-plugins
        - zsh-history-substring-search

    # ZSH FZF History Search (uses master branch, no version tags)
    - name: Mark zsh-fzf-history-search as up to date (no version tags available)
      set_fact:
        up_to_date: "{{ up_to_date + ['zsh-fzf-history-search (master branch)'] }}"
      tags:
        - zsh
        - zsh-plugins
        - zsh-fzf-history-search

    # ZSH Completions
    - name: Get latest zsh-completions version from GitHub
      uri:
        url: https://api.github.com/repos/zsh-users/zsh-completions/tags
        return_content: yes
      register: zsh_completions_latest
      tags:
        - zsh
        - zsh-plugins
        - zsh-completions

    - name: Compare zsh-completions versions
      set_fact:
        updates_available: "{{ updates_available + [{'tool': 'zsh-completions', 'current': zsh_completions_version, 'latest': zsh_completions_latest.json[0].name}] }}"
      when: zsh_completions_version != zsh_completions_latest.json[0].name
      tags:
        - zsh
        - zsh-plugins
        - zsh-completions

    - name: Mark zsh-completions as up to date
      set_fact:
        up_to_date: "{{ up_to_date + ['zsh-completions'] }}"
      when: zsh_completions_version == zsh_completions_latest.json[0].name
      tags:
        - zsh
        - zsh-plugins
        - zsh-completions

    # Generate Summary Report
    - name: Display separator
      debug:
        msg: "============================================"
      tags:
        - always

    - name: Display summary header
      debug:
        msg: "VERSION CHECK SUMMARY"
      tags:
        - always

    - name: Display up to date tools
      debug:
        msg: "✓ Up to date ({{ up_to_date | length }}): {{ up_to_date | join(', ') }}"
      when: up_to_date | length > 0
      tags:
        - always

    - name: Display updates available header
      debug:
        msg: "⚠ Updates available ({{ updates_available | length }}):"
      when: updates_available | length > 0
      tags:
        - always

    - name: Display each update available
      debug:
        msg: "  - {{ item.tool }}: {{ item.current }} → {{ item.latest }}"
      loop: "{{ updates_available }}"
      when: updates_available | length > 0
      tags:
        - always

    - name: Display no updates message
      debug:
        msg: "All tools are up to date!"
      when: updates_available | length == 0
      tags:
        - always

    - name: Display update instructions
      debug:
        msg: "To update versions, edit vars/versions.yml and run dev-setup.yml"
      when: updates_available | length > 0
      tags:
        - always

    - name: Display separator
      debug:
        msg: "============================================"
      tags:
        - always
